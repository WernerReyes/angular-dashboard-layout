<!-- <p-confirmdialog key="positionDialog" [position]="'bottom'" /> -->

<app-error-boundary [resource]="menuList" errorMessage="Ocurrió un error cargando los menús." emptyMessage="No hay menús">
    <ng-template #loading>
        <app-data-view-skeleton></app-data-view-skeleton>
    </ng-template>

    <p-confirmdialog />

    <p-inputgroup>
        <p-inputgroup-addon>
            <i class="pi pi-search cursor-pointer"></i>
        </p-inputgroup-addon>
        <input pInputText placeholder="Buscar menu..." [(ngModel)]="searchQuery" />
    </p-inputgroup>
    <p-divider></p-divider>

    @if (filteredMenuList().length === 0) {
    <div class="flex flex-col items-center justify-center py-8 text-surface-500">
        <i class="pi pi-inbox text-4xl mb-3"></i>
        <div class="font-semibold text-lg mb-1">No se encontraron menús</div>
        <div class="text-sm">Intenta ajustar tu búsqueda o crea un nuevo menú para comenzar.</div>
    </div>
    } @else {

    <div class="space-y-2 flex flex-col">
        @for (menuItem of filteredMenuList(); track menuItem.id) {
        <menu-item [menuItem]="menuItem" 
         [currentMenu]="currentMenu()"
        [onContextMenu]="onContextMenu.bind(this)"></menu-item>
        }

        <p-contextMenu #cm [model]="cmItems"></p-contextMenu>
    </div>
    }
</app-error-boundary>
