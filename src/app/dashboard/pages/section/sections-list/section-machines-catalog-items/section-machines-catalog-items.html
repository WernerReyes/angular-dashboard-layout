<section class="bg-gradient-to-br from-gray-50 to-slate-100 dark:from-slate-900 dark:to-slate-800 py-20 transition-all duration-300">
    <div class="container mx-auto px-4">
        @if (section().title) {
        <h2 class="text-3xl md:text-4xl font-bold text-primary-700 dark:text-primary-400 text-center">{{section().title}}</h2>
        } @else {
        <empty-field-message className="mx-auto max-w-sm" textContent="Título no disponible"></empty-field-message>
        } @if (section().description) {
        <p class="mt-3 text-sm text-slate-600 dark:text-slate-300 max-w-3xl block !mx-auto text-center">{{section().description}}</p>
        } @else {
        <empty-field-message className="mx-auto mt-4" textContent="Descripción no disponible"></empty-field-message>
        }

        <div
            class="grid gap-6 grid-cols-1 sm:grid-cols-2"
            [ngClass]="{
                'lg:grid-cols-3': isPreview(),
              'md:grid-cols-3 lg:grid-cols-4': !isPreview()
          }"
        >
            <!-- <ng-container *ngFor="let machine of machines(); let i = index">
                <p-card class="h-full bg-white dark:bg-slate-800 rounded-xl shadow-md hover:shadow-xl transition" style="overflow: visible">
                    <ng-template pTemplate="header">
                        <div class="flex justify-center pt-6">
                            <img [src]="machine.image" [alt]="machine.title" class="w-40 h-40 object-contain rounded-lg bg-white p-2 shadow-sm" />
                        </div>
                    </ng-template>

                    <div class="p-6 flex flex-col items-center text-center">
                        <a class="block text-primary-700 dark:text-primary-300 font-semibold hover:underline" href="#" (click)="$event.preventDefault(); openDetails(machine)"> {{ machine.title }} </a>
                        <p class="mt-3 text-sm text-slate-600 dark:text-slate-300">{{ machine.subtitle }}</p>

                        <p-button label="Detalle de Equipo" icon="pi pi-search" class="mt-6" styleClass="p-button-sm p-button-outlined" (onClick)="openDetails(machine)"> </p-button>
                    </div>
                </p-card>
            </ng-container> -->
            @if (section().machines?.length === 0) {
            <div class="col-span-full">
                <empty-field-message className="max-w-lg mx-auto mt-5" textContent="No hay máquinas disponibles"></empty-field-message>
            </div>
            } @else { @for (machine of section().machines; track machine.id) {

            <p-card class="h-full bg-white dark:bg-slate-800 rounded-xl shadow-md hover:shadow-xl transition">
                <ng-template #header>
                    <div class="flex justify-center pt-6">
                        <img [src]="getMainImageUrl(machine)" [alt]="machine.name" class="size-40 object-contain rounded-lg bg-white p-2 shadow-sm" />
                    </div>
                </ng-template>

                <div class="p-6 flex flex-col items-center text-center">
                    <h6 class="text-lg font-semibold text-surface-900 dark:text-surface-100">{{ machine.name }}</h6>
                    <p class="mt-3 text-sm text-slate-600 dark:text-slate-300">{{ machine.description }}</p>

                    @if (machine.linkId && machine.textButton) {
                    <p-button [label]="machine.textButton"> </p-button>
                    }
                </div>
            </p-card>
            } }
        </div>
    </div>
</section>
