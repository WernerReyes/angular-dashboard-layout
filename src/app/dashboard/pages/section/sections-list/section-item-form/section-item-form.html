<!-- [header]="selectedSectionItem () ? 'Editar item' : `Agregar item a la sección '${selectedSection()?.title}'`" -->

<p-dialog class="!overflow-hidden" [visible]="display()" (visibleChange)="closeDialog()" [breakpoints]="{ '1199px': '75vw', '575px': '90vw' }" [style]="{ width: '30vw' }" [modal]="true" [maximizable]="true">
    <ng-template #header>
        <div class="flex items-center gap-3">
            <i class="pi pi-folder-open text-surface-600 dark:text-surface-400"></i>
            <span>{{ selectedSectionItem() ? 'Editar item' : `Agregar item a la sección '${selectedSection()?.title}'` }}</span>
        </div>
    </ng-template>

    <form class="flex flex-col gap-4" [formGroup]="form" id="menu-form" (ngSubmit)="saveChanges()">
        @let sectionType = selectedSection()?.type;

        <div class="flex flex-col gap-x-2 gap-y-4 w-full">
            @switch (sectionType) { @case (SectionType.HERO) {
            <hero-form [selectedSectionItem]="selectedSectionItem()"></hero-form>
            } @case (SectionType.WHY_US) {
            <common-inputs [form]="form" [includeFields]="['title', 'content']"></common-inputs>
            <icon-upload [form]="form" iconFileName="iconFile" currentIconUrlName="currentIconUrl"></icon-upload>

            } @case (SectionType.CASH_PROCESSING_EQUIPMENT) {
            <common-inputs [form]="form" [includeFields]="['title']"></common-inputs>
            <icon-upload [form]="form" iconFileName="iconFile" currentIconUrlName="currentIconUrl"></icon-upload>
            <show-link-switch [form]="form"></show-link-switch>
            } @case (SectionType.VALUE_PROPOSITION) {
            <common-inputs [form]="form"></common-inputs>
            } @case (SectionType.CLIENT) { @let imageType = form.controls['imageType'].value;
            <div class="flex flex-col gap-2">
                <label>Imagen</label>
                <file-upload
                    currentImageName="currentImage"
                    imageSelector="image"
                    [selectedSectionItem]="selectedSectionItem()"
                    [form]="form"
                    label="URL de la imagen"
                    imageTypeName="imageType"
                    [imageType]="imageType"
                    imageFieldName="imageFile"
                    imageURLName="imageUrl"
                >
                </file-upload>
            </div>
            } }
        </div>
    </form>

    TODO
    <pre>{{ form.value | json }}</pre>

    <ng-template #footer>
        <button pButton type="submit" form="menu-form" icon="pi pi-save" [disabled]="form.invalid" label="Guardar"></button>
    </ng-template>
</p-dialog>
