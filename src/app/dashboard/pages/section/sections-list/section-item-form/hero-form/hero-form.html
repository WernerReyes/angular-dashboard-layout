<div class="flex flex-col gap-x-2 gap-y-4 w-full" [formGroup]="form">
    @let imageType = form.controls['imageType'].value; @let imageBackType = form.controls['imageBackType'].value;

    <common-inputs [form]="form"
        [includeFields]="[{
        type: 'title',
        label: 'Título',
        placeholder: 'Título del item',
        isTextarea: false
    }, {
        type: 'subtitle',
        label: 'Subtítulo (opcional)',
        placeholder: 'Subtítulo del item',
        isTextarea: false
    }, {
        type: 'content',
        label: 'Descripción (opcional)',
        placeholder: 'Descripción del item',
        isTextarea: true
    }]"
    ></common-inputs>

    <div class="flex flex-col gap-2">
        <label>Imagen (opcional)</label>
        <!-- [selectedSectionItem]="selectedSectionItem()" -->
        <file-upload
            currentImageName="currentImage"
            imageSelector="image"
            [form]="form"
            label="URL de la imagen"
            imageTypeName="imageType"
            [imageType]="imageType"
            imageFieldName="imageFile"
            imageURLName="imageUrl"
        >
        </file-upload>
    </div>

    <div class="flex flex-col gap-2">
        <label>Imagen de fondo</label>
        <!-- [selectedSectionItem]="selectedSectionItem()" -->
        <file-upload
            imageSelector="backgroundImage"
            currentImageName="currentImageBack"
            [form]="form"
            label="URL de la imagen"
            imageTypeName="imageBackType"
            [imageType]="imageBackType"
            imageFieldName="imageBackFile"
            imageURLName="imageBackUrl"
        >
        </file-upload>
    </div>

    <!-- <div class="flex gap-2 items-center">
        <p-toggleswitch inputId="link" formControlName="showLink" onLabel="Sí" offLabel="No" />
        <label for="link">¿Incluir enlace?</label>
    </div> -->

    <show-link-switch [form]="form"></show-link-switch>

    <!-- @if (form.controls['showLink'].value) {
    <div class="flex gap-4">
        <div class="flex flex-col w-full gap-2">
            <label for="parent">Texto del enlace</label>
            <input id="textButton" type="text" class="w-full" pInputText formControlName="textButton" placeholder="Texto del enlace" />
            @if (form.controls['textButton'].errors) {
            <p-message severity="error" size="small" variant="simple"> {{ FormUtils.getFieldError(form, 'textButton') }} </p-message>
            }
        </div>
        <p-togglebutton formControlName="typeLink" onLabel="Interno" offLabel="Externo" onIcon="pi pi-file" offIcon="pi pi-external-link" class="w-36" ariaLabel="Do you confirm" />
    </div>

    <app-error-boundary [resource]="linksList" [errorMessage]="'No se pudieron cargar los enlaces.'" [emptyMessage]="'No hay enlaces disponibles.'">
        <ng-template #content let-links>
            @let typeLink = form.controls['typeLink'].value;
            <div class="flex flex-col gap-2">
                <label for="linkId">Enlace a página</label>
                <p-select
                    [overlayOptions]="{
                    mode: 'modal'
                }"
                    id="linkId"
                    formControlName="linkId"
                    [options]="links | filterLinksByType:typeLink"
                    optionLabel="title"
                    optionValue="id"
                    placeholder="Selecciona un enlace"
                ></p-select>
                @if (form.controls['linkId'].errors) {
                <p-message severity="error" size="small" variant="simple"> {{ FormUtils.getFieldError(form, 'linkId') }} </p-message>
                }
            </div>
        </ng-template>
    </app-error-boundary>
    } -->
</div>
