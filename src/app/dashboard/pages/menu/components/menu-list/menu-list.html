<!-- <p-confirmdialog key="positionDialog" [position]="'bottom'" /> -->

<app-error-boundary [resource]="menuList" errorMessage="Ocurrió un error cargando los menús." emptyMessage="No hay menús">
    <ng-template #loading>
        <app-data-view-skeleton></app-data-view-skeleton>
    </ng-template>

    <p-confirmdialog />



    <p-inputgroup>
        <p-inputgroup-addon>
            <i class="pi pi-search cursor-pointer"></i>
        </p-inputgroup-addon>
        <input pInputText placeholder="Buscar menu..." [(ngModel)]="searchQuery" />
    </p-inputgroup>
    <p-divider></p-divider>

    @if (filteredMenuList().length === 0) {
    <div class="flex flex-col items-center justify-center py-8 text-surface-500">
        <i class="pi pi-inbox text-4xl mb-3"></i>
        <div class="font-semibold text-lg mb-1">No se encontraron menús</div>
        <div class="text-sm">Intenta ajustar tu búsqueda o crea un nuevo menú para comenzar.</div>
    </div>
    } @else { 
        
        <!-- @if (hasPositionChanged()) {
    <p-message (onClose)="cancelChanges()" severity="info" class="w-full" [closable]="true">
        <ng-template #icon>
            <p-button (click)="savePositionChanges()" label="Guardar cambios" text class="ml-2" icon="pi pi-save" severity="info"></p-button>
        </ng-template>
        <div class="flex items-center justify-between">
            <span class="ml-2">Has cambiado el orden de las secciones</span>
            <div></div>
        </div>
    </p-message>

    } -->
    <!-- cdkDropList [cdkDropListData]="filteredMenuList()" (cdkDropListDropped)="drop($event, filteredMenuList())" -->
      <!-- [class]="{
        'mt-5': hasPositionChanged()
      }" -->
    <div class="space-y-2 flex flex-col"
    
    >
        @for (menuItem of filteredMenuList(); track menuItem.id) { @let link = menuItem.link; @let activeStatus = menuActiveStatus[`${menuItem.active}`];
       <menu-item [menuItem]="menuItem" [confirmDeleteMenu]="confirmDeleteMenu.bind(this)" [openDialogAndEdit]="openDialogAndEdit.bind(this)"></menu-item>
        }
    </div>
    }
</app-error-boundary>
